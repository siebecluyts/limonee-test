<!DOCTYPE html>
<html>
  <head>
    <title>Limonee - spelletje</title>
    <link rel="stylesheet" href="../styles.css" />
    <meta charset="UTF-8" />
    <meta name="description" content="Drink de beste Limonee!" />
    <meta
      name="keywords"
      content="Limonade, limonee, limone, lekker, zoet, fris"
    />
    <meta name="author" content="limonee" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="https://cdn.glitch.global/638bdc36-d676-479e-8f39-ff81bc2e3bb1/contact%2Fimages%2Fapple-touch-icon.png?v=1735472049644"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="https://cdn.glitch.global/638bdc36-d676-479e-8f39-ff81bc2e3bb1/contact%2Fimages%2Ffavicon-32x32.png?v=1735472050279"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="https://cdn.glitch.global/638bdc36-d676-479e-8f39-ff81bc2e3bb1/contact%2Fimages%2Ffavicon-16x16.png?v=1735472049971"
    />
    <link rel="manifest" href="/site.webmanifest" />
  </head>
  <body>
    <div class="heading">
      <a href="/">
        <img
              class="logo"
          src="https://cdn.glitch.global/638bdc36-d676-479e-8f39-ff81bc2e3bb1/contact%2Fimages%2Flogo.png?v=1735472051762"
          alt="limonee"
          width="500"
          sizes="50"
        />
      </a>
      <ul>
        <li><a href="/limonade/">Limonade</a></li>
        <li><a id="about" href="/about/">Over ons</a></li>
        <li><a href="/contact/">Contact</a></li>
        <li><a href="/game/">Spelletje</a></li>
        <li><a href="/planning/">Planning</a></li>
        <li><a href="/contact/bestelling/">Bestellen</a></li>
                    <li><a href="/smaken/">Onze smaken</a></li>
      </ul>
          <div id="custom-menu">
        <ul>
            <li onclick="location.href='/';">Home</li>
        </ul>
    </div>
          <button id="openPopup">Abonneer</button>

    <!-- Popup Form -->
    <div id="popup" class="popup">
        <div class="popup-content">
            <span id="closePopup" class="close">&times;</span>
            <h2>Abonneer op de LimoneMail!</h2>
            <form action="https://formspree.io/f/manenqdz" method="POST">
              <input type="naam" name="naam" placeholder="Naam" required>
                <input type="email" name="email" placeholder="Email addres" required>
              <p>Selecteer waar je berichten van wilt krijgen:</p>
                <label>
                    <input type="checkbox" name="interests" value="dagen open"> Nieuwe dagen open
                </label><br>
                <label>
                    <input type="checkbox" name="interests" value="new taste"> Nieuwe smaken
                </label><br>                              <label>
                    <input type="checkbox" name="interests" value="news"> Nieuws
                </label><br>

                <button type="submit">Abonneer!</button>
              <a href="/limonemail/">Meer info.</a>
            </form>
        </div>
    </div>
      <h2>Spelletje</h2>
      <h3>Vang de ingedriënten!</h3>
      <iframe src="/game/1.html" width="500" height="500"> </iframe>
      <p>
        In dit spel moet je proberen de ingedriënten van de limonade (Suiker,
        citroen en limoene) te pakken en de donut niet te pakken. Je kan ook het
        winkelmandje pakken om van alles 1 meer te krijgen. Als je van elk van
        de ingedriënten minstens 1 hebt, kan je die wisselen voor vier glazen.
        Als je bijvoorbeeld van alles minstens 2 hebt kan je acht glazen
        krijgen. Deze glazen kan je verkopen voor een munt per glas. Met de
        munten kan je uitbreidingen kopen.
      </p>
      <br />
      <h3>
        Maak je eigen beker!
      </h3>
        <div class="container">
    <h1>Maak je eigen beker!</h1>
  <label for="colorPicker">Kies kleur:</label>
  <input type="color" id="colorPicker" value="#ffe066">

  <select id="stickerSelect">
    <option value="">Sticker kiezen</option>
    <option value="🍋">Citroen</option>
    <option value="🌞">Zon</option>
    <option value="🍓">Aardbei</option>
    <option value="🧊">IJsblok</option>
  </select>

  <input type="text" id="tekstInput" placeholder="Voeg tekst toe">
  <button onclick="addText()">➕ Voeg tekst toe</button>
  <br>

  <div id="cup"></div>

  <button onclick="delen()">📤 Delen</button>

  <!-- SHARE POPUP -->
  <div id="overlay" onclick="sluitPopup()"></div>
  <div id="sharePopup">
    <h3>Deel deze beker</h3>
    <input id="shareLink" readonly style="width: 90%; padding: 5px">
    <button onclick="kopieerLink()">Kopieer link</button>
    <div class="social-buttons">
      <a target="_blank" id="fb"><button>Facebook</button></a>
      <a target="_blank" id="tw"><button>Twitter</button></a>
      <a target="_blank" id="wa"><button>WhatsApp</button></a>
    </div>
    <button onclick="sluitPopup()">Sluiten</button>
  </div>

  <script>
    const cup = document.getElementById('cup');
    const colorPicker = document.getElementById('colorPicker');
    const stickerSelect = document.getElementById('stickerSelect');
    const tekstInput = document.getElementById('tekstInput');

    colorPicker.addEventListener('input', () => {
      cup.style.background = colorPicker.value;
      updateURL();
    });

    stickerSelect.addEventListener('change', () => {
      const emoji = stickerSelect.value;
      if (emoji) addSticker(emoji);
    });

    function addSticker(emoji) {
      const el = document.createElement('div');
      el.classList.add('sticker');
      el.textContent = emoji;
      el.style.left = '50px';
      el.style.top = '50px';
      makeDraggable(el);
      cup.appendChild(el);
      updateURL();
    }

    function addText() {
      const text = tekstInput.value;
      if (!text) return;
      const el = document.createElement('div');
      el.classList.add('tekst');
      el.textContent = text;
      el.style.left = '40px';
      el.style.top = '100px';
      makeDraggable(el);
      cup.appendChild(el);
      tekstInput.value = '';
      updateURL();
    }

    function makeDraggable(el) {
      el.onmousedown = function(e) {
        let offsetX = e.offsetX, offsetY = e.offsetY;
        function moveAt(e) {
          el.style.left = (e.pageX - cup.offsetLeft - offsetX) + 'px';
          el.style.top = (e.pageY - cup.offsetTop - offsetY) + 'px';
        }
        function stop() {
          document.removeEventListener('mousemove', moveAt);
          document.removeEventListener('mouseup', stop);
          updateURL();
        }
        document.addEventListener('mousemove', moveAt);
        document.addEventListener('mouseup', stop);
      };
    }

    function updateURL() {
      const kleur = encodeURIComponent(colorPicker.value);
      let stickers = [], teksten = [];

      cup.querySelectorAll('.sticker').forEach(el => {
        stickers.push({
          emoji: el.textContent,
          x: parseInt(el.style.left),
          y: parseInt(el.style.top)
        });
      });

      cup.querySelectorAll('.tekst').forEach(el => {
        teksten.push({
          text: el.textContent,
          x: parseInt(el.style.left),
          y: parseInt(el.style.top)
        });
      });

      const params = new URLSearchParams();
      params.set('kleur', kleur);
      params.set('stickers', JSON.stringify(stickers));
      params.set('teksten', JSON.stringify(teksten));

      const url = `${location.origin}${location.pathname}?${params.toString()}`;
      document.getElementById('shareLink').value = url;
      document.getElementById('fb').href = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`;
      document.getElementById('tw').href = `https://twitter.com/intent/tweet?url=${encodeURIComponent(url)}`;
      document.getElementById('wa').href = `https://wa.me/?text=${encodeURIComponent(url)}`;
    }

    function delen() {
      updateURL();
      document.getElementById('overlay').style.display = 'block';
      document.getElementById('sharePopup').style.display = 'block';
    }

    function sluitPopup() {
      document.getElementById('overlay').style.display = 'none';
      document.getElementById('sharePopup').style.display = 'none';
    }

    function kopieerLink() {
      const input = document.getElementById('shareLink');
      input.select();
      document.execCommand('copy');
      alert('Link gekopieerd!');
    }

    // Laden vanuit URL
    function loadFromURL() {
      const params = new URLSearchParams(location.search);
      const kleur = params.get('kleur');
      if (kleur) {
        colorPicker.value = kleur;
        cup.style.background = kleur;
      }

      const stickers = JSON.parse(params.get('stickers') || '[]');
      stickers.forEach(s => {
        const el = document.createElement('div');
        el.classList.add('sticker');
        el.textContent = s.emoji;
        el.style.left = s.x + 'px';
        el.style.top = s.y + 'px';
        makeDraggable(el);
        cup.appendChild(el);
      });

      const teksten = JSON.parse(params.get('teksten') || '[]');
      teksten.forEach(t => {
        const el = document.createElement('div');
        el.classList.add('tekst');
        el.textContent = t.text;
        el.style.left = t.x + 'px';
        el.style.top = t.y + 'px';
        makeDraggable(el);
        cup.appendChild(el);
      });
    }

    window.onload = loadFromURL;
  </script>
            <style>
    #cup {
      width: 200px;
      height: 300px;
      margin: 20px auto;
      border-radius: 20px;
      background: #ffe066;
      border: 4px solid #f1c40f;
      position: relative;
      overflow: hidden;
    }

    .sticker, .tekst {
      position: absolute;
      cursor: move;
    }

    .sticker {
      width: 50px;
      height: 50px;
      background-size: cover;
    }

    .tekst {
      font-size: 16px;
      color: #000;
      font-weight: bold;
    }

    button, input, select {
      margin: 5px;
      padding: 10px;
      border-radius: 6px;
      border: none;
    }

    #overlay, #sharePopup {
      display: none;
      position: fixed;
      z-index: 99;
    }

    #overlay {
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.5);
    }

    #sharePopup {
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      border: 2px solid #f1c40f;
      padding: 20px;
      border-radius: 10px;
      z-index: 100;
    }

    .social-buttons button {
      margin: 5px;
      background: #3498db;
      color: white;
    }
  </style>

<p>
  In dit spel mag je je eigen beker maken en publiceren.
      </p>
      <br />
      <br />
      <br />
      <br />
  <div class="notification">
    <p>Lekkere frisse limonade!</p>
    <button onclick="goToPage()">Betsel hier!</button>
    <button onclick="closeNotification()">X</button>
  </div>
      <script src="../script.js"></script>
      <script src="https://formspree.io/js/formbutton-v1.min.js" defer></script>
    </div>
    </div>
  </body>
  <footer>
    <div class="footer">
      <p>&#169;2025 Limonee</p>
    </div>
  </footer>
</html>
