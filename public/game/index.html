<!DOCTYPE html>
<html>
  <head>
    <title>Limonee - spelletje</title>
    <link rel="stylesheet" href="../styles.css" />
    <meta charset="UTF-8" />
    <meta name="description" content="Drink de beste Limonee!" />
    <meta
      name="keywords"
      content="Limonade, limonee, limone, lekker, zoet, fris"
    />
    <meta name="author" content="limonee" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="https://cdn.glitch.global/638bdc36-d676-479e-8f39-ff81bc2e3bb1/contact%2Fimages%2Fapple-touch-icon.png?v=1735472049644"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="32x32"
      href="https://cdn.glitch.global/638bdc36-d676-479e-8f39-ff81bc2e3bb1/contact%2Fimages%2Ffavicon-32x32.png?v=1735472050279"
    />
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="https://cdn.glitch.global/638bdc36-d676-479e-8f39-ff81bc2e3bb1/contact%2Fimages%2Ffavicon-16x16.png?v=1735472049971"
    />
    <link rel="manifest" href="/site.webmanifest" />
  </head>
  <body>
    <div class="heading">
      <a href="/">
        <img
              class="logo"
          src="https://cdn.glitch.global/638bdc36-d676-479e-8f39-ff81bc2e3bb1/contact%2Fimages%2Flogo.png?v=1735472051762"
          alt="limonee"
          width="500"
          sizes="50"
        />
      </a>
      <ul>
        <li><a href="/limonade/">Limonade</a></li>
        <li><a id="about" href="/about/">Over ons</a></li>
        <li><a href="/contact/">Contact</a></li>
        <li><a href="/game/">Spelletje</a></li>
        <li><a href="/planning/">Planning</a></li>
        <li><a href="/contact/bestelling/">Bestellen</a></li>
                    <li><a href="/smaken/">Onze smaken</a></li>
      </ul>
          <div id="custom-menu">
        <ul>
            <li onclick="location.href='/';">Home</li>
        </ul>
    </div>
          <button id="openPopup">Abonneer</button>

    <!-- Popup Form -->
    <div id="popup" class="popup">
        <div class="popup-content">
            <span id="closePopup" class="close">&times;</span>
            <h2>Abonneer op de LimoneMail!</h2>
            <form action="https://formspree.io/f/manenqdz" method="POST">
              <input type="naam" name="naam" placeholder="Naam" required>
                <input type="email" name="email" placeholder="Email addres" required>
              <p>Selecteer waar je berichten van wilt krijgen:</p>
                <label>
                    <input type="checkbox" name="interests" value="dagen open"> Nieuwe dagen open
                </label><br>
                <label>
                    <input type="checkbox" name="interests" value="new taste"> Nieuwe smaken
                </label><br>                              <label>
                    <input type="checkbox" name="interests" value="news"> Nieuws
                </label><br>

                <button type="submit">Abonneer!</button>
              <a href="/limonemail/">Meer info.</a>
            </form>
        </div>
    </div>
      <h2>Spelletje</h2>
      <h3>Vang de ingedriënten!</h3>
      <iframe src="/game/1.html" width="500" height="500"> </iframe>
      <p>
        In dit spel moet je proberen de ingedriënten van de limonade (Suiker,
        citroen en limoene) te pakken en de donut niet te pakken. Je kan ook het
        winkelmandje pakken om van alles 1 meer te krijgen. Als je van elk van
        de ingedriënten minstens 1 hebt, kan je die wisselen voor vier glazen.
        Als je bijvoorbeeld van alles minstens 2 hebt kan je acht glazen
        krijgen. Deze glazen kan je verkopen voor een munt per glas. Met de
        munten kan je uitbreidingen kopen.
      </p>
      <br />
      <h3>
        Maak je eigen beker!
      </h3>
        <div class="container">
    <h1>Maak je eigen beker!</h1>
  <input type="color" id="colorPicker" value="#ffeb3b">
  <button onclick="wijzigKleur()">Kleur Beker</button>
  <br><br>

  <button onclick="voegStickerToe('🍓')">🍓</button>
  <button onclick="voegStickerToe('🍋')">🍋</button>
  <button onclick="voegStickerToe('🌞')">🌞</button>
  <button onclick="voegTekstToe()">📝 Voeg Tekst toe</button>
  <br><br>

  <div id="cup" class="cup"></div>
  <br>
  <button onclick="opslaan()">💾 Opslaan & Delen</button>

  <!-- Delen popup -->
  <div id="popup" style="display:none; background:#fff3cd; padding:20px; border-radius:10px; margin:20px auto; width:300px;">
    <p><strong>Jouw deelbare link:</strong></p>
    <input type="text" id="shareLink" readonly style="width:100%; padding:5px;">
    <button onclick="kopieer()">📋 Kopieer Link</button>
    <br><br>
    <a id="fb" target="_blank">🔵 Facebook</a> |
    <a id="tw" target="_blank">🐦 Twitter</a> |
    <a id="wa" target="_blank">🟢 WhatsApp</a>
  </div>

  <script>
    const cup = document.getElementById('cup');
    const colorPicker = document.getElementById('colorPicker');

    function wijzigKleur() {
      cup.style.background = colorPicker.value;
    }

    function voegStickerToe(emoji) {
      const el = document.createElement('div');
      el.className = 'sticker';
      el.textContent = emoji;
      el.style.left = '50px';
      el.style.top = '50px';
      maakSleepbaar(el);
      cup.appendChild(el);
    }

    function voegTekstToe() {
      const text = prompt("Voer je tekst in:");
      if (text) {
        const el = document.createElement('div');
        el.className = 'tekst';
        el.textContent = text;
        el.style.left = '60px';
        el.style.top = '60px';
        maakSleepbaar(el);
        cup.appendChild(el);
      }
    }

    function maakSleepbaar(el) {
      el.onmousedown = function(e) {
        e.preventDefault();
        let offsetX = e.offsetX, offsetY = e.offsetY;

        function bewegen(ev) {
          el.style.left = (ev.pageX - cup.offsetLeft - offsetX) + 'px';
          el.style.top = (ev.pageY - cup.offsetTop - offsetY) + 'px';
        }

        function loslaten() {
          document.removeEventListener('mousemove', bewegen);
          document.removeEventListener('mouseup', loslaten);
        }

        document.addEventListener('mousemove', bewegen);
        document.addEventListener('mouseup', loslaten);
      };
    }

    function opslaan() {
      const kleur = colorPicker.value;
      let stickers = [], teksten = [];

      cup.querySelectorAll('.sticker').forEach(el => {
        stickers.push({
          emoji: el.textContent,
          x: parseInt(el.style.left),
          y: parseInt(el.style.top)
        });
      });

      cup.querySelectorAll('.tekst').forEach(el => {
        teksten.push({
          text: el.textContent,
          x: parseInt(el.style.left),
          y: parseInt(el.style.top)
        });
      });

      fetch('/save', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ kleur, stickers, teksten })
      })
      .then(res => res.json())
      .then(data => {
        const viewLink = `${location.origin}/view.html?id=${data.id}`;
        document.getElementById('shareLink').value = viewLink;
        document.getElementById('fb').href = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(viewLink)}`;
        document.getElementById('tw').href = `https://twitter.com/intent/tweet?url=${encodeURIComponent(viewLink)}`;
        document.getElementById('wa').href = `https://wa.me/?text=${encodeURIComponent(viewLink)}`;
        document.getElementById('popup').style.display = 'block';
      });
    }

    function kopieer() {
      const copyText = document.getElementById('shareLink');
      copyText.select();
      document.execCommand('copy');
      alert("Gekopieerd!");
    }
  </script>

<p>
  In dit spel mag je je eigen beker maken en publiceren.
      </p>
      <br />
      <br />
      <br />
      <br />
  <div class="notification">
    <p>Lekkere frisse limonade!</p>
    <button onclick="goToPage()">Betsel hier!</button>
    <button onclick="closeNotification()">X</button>
  </div>
      <script src="../script.js"></script>
      <script src="https://formspree.io/js/formbutton-v1.min.js" defer></script>
    </div>
    </div>
  </body>
  <footer>
    <div class="footer">
      <p>&#169;2025 Limonee</p>
    </div>
  </footer>
</html>
